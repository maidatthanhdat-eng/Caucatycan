<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Câu Cá Tỷ Cân</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
  }
  #game {
    width: 2000px;
    height: 1000px;
    position: relative;
    background: url('background.jpg') repeat;
  }
  #player {
    width: 50px;
    height: 50px;
    position: absolute;
    left: 100px;
    top: 100px;
    background: url('santachuoibi.jpg') center/cover no-repeat;
    transition: transform 0.1s linear; /* mượt */
  }
</style>
</head>
<body>
<div id="game">
  <div id="player"></div>
</div>

<script>
const player = document.getElementById('player');
const game = document.getElementById('game');

let pos = { x: 100, y: 100 };
const speed = 5;
let keys = { w: false, a: false, s: false, d: false };

// Lắng nghe phím
document.addEventListener('keydown', e => {
  if(e.key.toLowerCase() === 'w') keys.w = true;
  if(e.key.toLowerCase() === 'a') keys.a = true;
  if(e.key.toLowerCase() === 's') keys.s = true;
  if(e.key.toLowerCase() === 'd') keys.d = true;
});
document.addEventListener('keyup', e => {
  if(e.key.toLowerCase() === 'w') keys.w = false;
  if(e.key.toLowerCase() === 'a') keys.a = false;
  if(e.key.toLowerCase() === 's') keys.s = false;
  if(e.key.toLowerCase() === 'd') keys.d = false;
});

// Hàm cập nhật vị trí
function update() {
  if(keys.w) pos.y -= speed;
  if(keys.s) pos.y += speed;
  if(keys.a) pos.x -= speed;
  if(keys.d) pos.x += speed;

  // Giới hạn trong game world
  pos.x = Math.max(0, Math.min(pos.x, game.offsetWidth - player.offsetWidth));
  pos.y = Math.max(0, Math.min(pos.y, game.offsetHeight - player.offsetHeight));

  // Cập nhật vị trí nhân vật
  player.style.left = pos.x + 'px';
  player.style.top = pos.y + 'px';

  // Camera theo nhân vật
  const camX = pos.x - window.innerWidth / 2 + player.offsetWidth / 2;
  const camY = pos.y - window.innerHeight / 2 + player.offsetHeight / 2;
  window.scrollTo(camX, camY);

  requestAnimationFrame(update);
}

// Bắt đầu vòng lặp
update();
</script>
</body>
</html>
