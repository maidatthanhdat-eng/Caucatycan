<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Câu Cá Tỷ Cân</title>

<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #000;
  }

  #viewport {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    position: relative;
  }

  #game {
    width: 2000px;
    height: 1000px;
    position: absolute;
    left: 0;
    top: 0;
    background: url("background.jpg") repeat;
  }

  #player {
    width: 50px;
    height: 50px;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background: url("santachuoibi.jpg") center/cover no-repeat;
    z-index: 10;
  }
</style>
</head>

<body>
<div id="viewport">
  <div id="game">
    <div id="player"></div>
  </div>
</div>

<script>
const game = document.getElementById("game");
const viewport = document.getElementById("viewport");

const speed = 6;

// vị trí camera (map)
let cam = {
  x: 0,
  y: 0
};

let keys = {
  w: false,
  a: false,
  s: false,
  d: false
};

document.addEventListener("keydown", e => {
  const k = e.key.toLowerCase();
  if (k in keys) keys[k] = true;
});

document.addEventListener("keyup", e => {
  const k = e.key.toLowerCase();
  if (k in keys) keys[k] = false;
});

function update() {
  // WASD (KHÔNG NGƯỢC)
  if (keys.w) cam.y += speed; // đi lên
  if (keys.s) cam.y -= speed; // đi xuống
  if (keys.a) cam.x += speed; // sang trái
  if (keys.d) cam.x -= speed; // sang phải

  // Giới hạn map
  cam.x = Math.min(0, Math.max(cam.x, viewport.clientWidth - game.offsetWidth));
  cam.y = Math.min(0, Math.max(cam.y, viewport.clientHeight - game.offsetHeight));

  game.style.transform = `translate(${cam.x}px, ${cam.y}px)`;

  requestAnimationFrame(update);
}

update();
</script>
</body>
</html>

